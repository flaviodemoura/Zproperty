\documentclass[10pt]{beamer}

\usetheme[progressbar=frametitle]{metropolis}

\usepackage{booktabs}
\usepackage[scale=2]{ccicons}

\usepackage{pgfplots}
\usepgfplotslibrary{dateplot}

\usepackage[utf8]{inputenc}
\usepackage{xspace}
\usepackage[color]{coqdoc}
\usepackage[all]{xy}

\newcommand{\themename}{\textbf{\textsc{metropolis}}\xspace}
\newcommand{\term}{{\mathcal{T}}}
\newcommand{\fv}[1]{{\tt fv}(#1)}
\newcommand{\set}[1]{\{#1\}}

\title{A Formalisation that Z Property implies Confluence}
\date{\today}
\author{Flávio L. C. de Moura and Leandro Oliveira Rezende}
\institute{Universidade de Brasília}
\titlegraphic{\hfill\includegraphics[height=1.5cm]{unb-logo.png}}

\begin{document}

\maketitle
\begin{frame}{Table of contents}
  \setbeamertemplate{section in toc}[sections numbered]
  \tableofcontents[hideallsubsections]
\end{frame}

\section{Abstract Rewriting Systems}

\begin{frame}[fragile]{Confluence and the Z Property}
  
  \begin{definition}[Z Property]
    Let $(A,\to)$ be an abstract rewriting system (ARS). The system $(A,\to)$ has the Z property, if there exists a map $wb:A \to A$ such that:
    
    \[
      \xymatrix{
        a \ar[r] &  b \ar@{.>>}[dl]\\
        wb(a) \ar@{.>>}[r] & wb(b) \\ 
      }
    \]
\end{definition}

  \begin{coqdoccode}
    \coqdocemptyline \coqdocnoindent \coqdockw{Definition}
    \coqdocvar{Zprop} \{\coqdocvar{A}:\coqdockw{Type}\}
    (\coqdocvar{R}: \coqdocvar{Rel} \coqdocvar{A}) :=
    \coqdoctac{\ensuremath{\exists}} \coqdocvar{wb}:\coqdocvar{A}
    \ensuremath{\rightarrow} \coqdocvar{A},
    \coqdockw{\ensuremath{\forall}} \coqdocvar{a} \coqdocvar{b},
    \coqdocvar{R} \coqdocvar{a} \coqdocvar{b} \ensuremath{\rightarrow}
    ((\coqdocvar{refltrans} \coqdocvar{R}) \coqdocvar{b}
    (\coqdocvar{wb} \coqdocvar{a}) \ensuremath{\land}
    (\coqdocvar{refltrans} \coqdocvar{R}) (\coqdocvar{wb}
    \coqdocvar{a}) (\coqdocvar{wb} \coqdocvar{b})).\coqdoceol
  \end{coqdoccode}
\end{frame}

\begin{frame}[fragile]{Confluence and the Z Property}
  
  \begin{definition}[Confluence]
    An ARS $(A,\to)$ is confluent if
    
    \[
      \xymatrix{
        & a \ar@{->>}[dl] \ar@{->>}[dr] & \\
        b \ar@{.>>}[dr] &  & c \ar@{.>>}[dl] \\
        & d & 
      }
    \]
  \end{definition}
  
  \begin{coqdoccode}
    \coqdockw{Definition} \coqdocvar{Confl} \{\coqdocvar{A}:\coqdockw{Type}\} (\coqdocvar{R}: \coqdocvar{Rel} \coqdocvar{A}) := \coqdockw{\ensuremath{\forall}} \coqdocvar{a} \coqdocvar{b} \coqdocvar{c}, (\coqdocvar{refltrans} \coqdocvar{R}) \coqdocvar{a} \coqdocvar{b} \ensuremath{\rightarrow} (\coqdocvar{refltrans} \coqdocvar{R}) \coqdocvar{a} \coqdocvar{c} \ensuremath{\rightarrow} (\coqdoctac{\ensuremath{\exists}} \coqdocvar{d}, (\coqdocvar{refltrans} \coqdocvar{R}) \coqdocvar{b} \coqdocvar{d} \ensuremath{\land} (\coqdocvar{refltrans} \coqdocvar{R}) \coqdocvar{c} \coqdocvar{d}).\coqdoceol
  \end{coqdoccode}
\end{frame}

\begin{frame}[fragile]{Confluence and the Z Property}
  
  \[
    \xymatrix{
      a \ar[r] &  b \ar@{.>>}[dl] & \ar@/^2.0pc/@{=>}@[red][rr] & &    & a \ar@{->>}[dl] \ar@{->>}[dr] & \\ 
      wb(a) \ar@{.>>}[r] & wb(b) & & &   b \ar@{.>>}[dr] &  & c \ar@{.>>}[dl] \\
      & & & &       & d & 
            }
  \]
  
  \begin{coqdoccode}
    \coqdockw{Theorem} \coqdocvar{Zprop\_implies\_Confl} \{\coqdocvar{A}:\coqdockw{Type}\}: \coqdockw{\ensuremath{\forall}} \coqdocvar{R}: \coqdocvar{Rel} \coqdocvar{A}, \coqdocvar{Zprop} \coqdocvar{R} \ensuremath{\rightarrow} \coqdocvar{Confl} \coqdocvar{R}.\coqdoceol
  \end{coqdoccode}
\end{frame}

\section{Application: Explicit Substitutions}

\begin{frame}[fragile]{The set of free variables of a term}
\begin{definition}
  Let $t$ be a term. The set of free variables of $t$, notation $\fv{t}$, is inductively defined as:
  \begin{itemize}
  \item $\fv{x} = \set{x}$
  \end{itemize}
\end{definition}
\end{frame}

\begin{frame}[fragile]{The $\lambda{\tt ex}$-calculus}
\begin{itemize}
\item Developed by Delia Kesner \cite{kes09}

  $$\term ::= x \mid \term\term \mid \lambda x.\term \mid \term[x/\term]$$

  $$\begin{array}{llll}
      t[x/u][y/v] & =_C & t[y/v][x/u] & \mbox{ if } y \notin\fv{u} \mbox{ and } x \notin \fv{v} \\[.5cm]
      (\lambda x. t)\ u & \to_{\tt B} & t[x/u] & \\      
      \end{array}$$
  
\end{itemize}
\end{frame}

\begin{frame}[fragile]{Locally Nameless Representation}
\begin{itemize}
\item Developed in Coq by Arthur Charguéraud.
\item No need for $\alpha$-conversion.
\item Cofinite quantification is used to obtain strong induction principles.
\end{itemize}
\end{frame}

\bibliographystyle{plain}
\bibliography{Zprop.bib}


\end{document}
